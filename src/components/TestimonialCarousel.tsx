'use client';

import { useState, useEffect, useRef } from 'react';
import { motion, AnimatePresence } from 'framer-motion';

export interface Testimonial {
  text: string;
  name: string;
  role: string;
  image?: string;
  source?: 'google' | 'yelp' | 'facebook' | 'thumbtack' | 'nextdoor';
}

interface TestimonialCarouselProps {
  testimonials: Testimonial[];
  autoPlay?: boolean;
  interval?: number;
  className?: string;
}

export default function TestimonialCarousel({
  testimonials,
  autoPlay = true,
  interval = 5000,
  className = '',
}: TestimonialCarouselProps) {
  const [current, setCurrent] = useState(0);
  const [direction, setDirection] = useState(1); // 1 for right, -1 for left
  const timeoutRef = useRef<NodeJS.Timeout | null>(null);

  useEffect(() => {
    if (!autoPlay) return;
    
    // Clear any existing timeout first
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }
    
    // Set a new timeout
    timeoutRef.current = setTimeout(() => {
      setDirection(1);
      setCurrent((prev) => (prev + 1) % testimonials.length);
    }, interval);

    // Cleanup function
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, [current, autoPlay, interval, testimonials.length]);

  const handlePrev = () => {
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }
    setDirection(-1);
    setCurrent((prev) => (prev - 1 + testimonials.length) % testimonials.length);
  };

  const handleNext = () => {
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }
    setDirection(1);
    setCurrent((prev) => (prev + 1) % testimonials.length);
  };

  const variants = {
    enter: (direction: number) => ({
      x: direction > 0 ? '100%' : '-100%',
      opacity: 0,
    }),
    center: {
      x: 0,
      opacity: 1,
    },
    exit: (direction: number) => ({
      x: direction < 0 ? '100%' : '-100%',
      opacity: 0,
    }),
  };

  return (
    <div className={`relative overflow-hidden ${className}`}>
      <div className="relative h-full">
        <AnimatePresence mode="wait" custom={direction}>
          <motion.div
            key={current}
            custom={direction}
            variants={variants}
            initial="enter"
            animate="center"
            exit="exit"
            transition={{ duration: 0.5, ease: 'easeInOut' }}
            className="w-full h-full flex flex-col items-center justify-center py-6 px-4 text-center"
          >
            <div className="mb-6">
              {testimonials[current].source && (
                <div className="mb-4">
                  {testimonials[current].source === 'google' && (
                    <div className="inline-flex items-center justify-center p-2 bg-white rounded-lg shadow-sm">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="40px" height="40px">
                        <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/>
                        <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/>
                        <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/>
                        <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"/>
                      </svg>
                    </div>
                  )}
                  {testimonials[current].source === 'yelp' && (
                    <div className="inline-flex items-center justify-center p-2 bg-white rounded-lg shadow-sm">
                      <svg width="40" height="27" viewBox="0 0 40 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M28.5714 10.8357C28.92 9.92357 29.4343 9.10286 30.0686 8.40429C30.7029 7.70571 31.4543 7.14 32.2971 6.74357C33.1314 6.34714 34.0457 6.14714 35.0114 6.14714C35.6629 6.14714 36.2971 6.23571 36.9143 6.42429C37.5314 6.60429 38.1143 6.88071 38.6543 7.24357C39.2029 7.60643 39.6857 8.06643 40.1029 8.61357C40.52 9.16071 40.8629 9.78643 41.1143 10.4943C41.3743 11.2021 41.5486 11.96 41.6371 12.7693C41.7257 13.5786 41.7143 14.3879 41.6029 15.1886C41.4914 15.9893 41.28 16.7479 40.96 17.4557C40.6486 18.1636 40.2314 18.8123 39.7086 19.4036C39.1857 19.9864 38.5771 20.4893 37.8971 20.8964C37.2086 21.3036 36.4743 21.6071 35.6743 21.8214C35.1686 21.9614 34.64 22.0414 34.0971 22.0671C33.5543 22.0843 33.0143 22.0329 32.4771 21.9121C31.9486 21.7914 31.44 21.6071 30.9771 21.3464C30.5057 21.0857 30.08 20.7736 29.6914 20.3764C29.2943 19.9879 28.96 19.5479 28.6857 19.0564C28.4114 18.5736 28.2171 18.0564 28.0971 17.4993C28.0514 17.2814 28.0171 17.0464 27.9943 16.8114C27.9714 16.5764 27.9657 16.3414 27.9714 16.0979C27.9771 15.8629 27.9943 15.6279 28.0343 15.4014C28.0743 15.175 28.1143 14.9664 28.1771 14.775C28.2857 14.3864 28.44 14.015 28.64 13.6521C28.84 13.2893 29.0743 12.955 29.3429 12.6307C29.6114 12.315 29.9143 12.0157 30.24 11.7464C30.5657 11.4771 30.92 11.2336 31.2971 11.0071C31.6743 10.7807 32.0743 10.5886 32.4971 10.4164C32.92 10.2529 33.3543 10.1064 33.8 9.987C33.1314 10.7464 32.5029 11.5386 31.92 12.3636C31.3371 13.1886 30.7886 14.0307 30.2857 14.8914C29.7743 15.7521 29.32 16.6129 28.9257 17.4736C28.5229 18.3343 28.16 19.1521 27.8286 19.9107C27.8286 19.3107 27.9029 18.7279 28.0457 18.1707C28.1886 17.605 28.3829 17.0736 28.6343 16.5557C28.8857 16.0464 29.1771 15.5557 29.52 15.0979C29.8543 14.64 30.2171 14.2086 30.6114 13.8114C31.0057 13.4057 31.4229 13.025 31.8514 12.6707C32.28 12.3164 32.7314 11.9621 33.18 11.6164C32.6057 11.7993 32.0629 12.0243 31.5514 12.3036C31.04 12.5743 30.5686 12.9121 30.1371 13.3007C29.7057 13.6893 29.32 14.1307 28.9886 14.6307C28.6486 15.1221 28.3829 15.6536 28.1714 16.215C27.96 16.7764 27.8 17.3636 27.6971 17.9679C27.5943 18.5721 27.5543 19.1764 27.5829 19.7721C27.5829 19.9307 27.6057 20.0979 27.64 20.2736C27.6743 20.4493 27.7314 20.6164 27.8 20.775C27.88 20.9343 27.9771 21.0857 28.08 21.2121C28.1914 21.3386 28.3143 21.455 28.4429 21.5471C28.6971 21.7143 28.9714 21.8471 29.2514 21.9679C29.5314 22.0886 29.82 22.1771 30.1086 22.24C30.3886 22.3029 30.6743 22.3457 30.96 22.3629C31.2457 22.38 31.5257 22.3714 31.8057 22.3371C32.0857 22.3029 32.3543 22.2507 32.6229 22.1721C32.8914 22.0936 33.1486 21.9979 33.3943 21.8857C33.7429 21.7307 34.0686 21.5471 34.3771 21.3371C34.6771 21.1271 34.96 20.8914 35.2114 20.6307C35.4629 20.37 35.6914 20.0886 35.8971 19.7893C36.0943 19.49 36.28 19.1821 36.44 18.8664C36.5943 18.5507 36.7257 18.2264 36.8343 17.8936C36.9429 17.5607 37.0229 17.2279 37.0743 16.8864C37.1257 16.545 37.16 16.2036 37.16 15.87C37.16 15.5364 37.1486 15.1886 37.1029 14.8393C37.0571 14.49 36.9886 14.1493 36.8914 13.8164C36.8057 13.4836 36.6971 13.1593 36.5686 12.835C36.44 12.5193 36.2886 12.215 36.1143 11.9107C35.9486 11.615 35.7486 11.3364 35.52 11.0664C35.2914 10.7964 35.04 10.5536 34.7714 10.335C34.5029 10.1164 34.2114 9.93 33.9 9.77214C33.5886 9.61429 33.26 9.48929 32.92 9.39C32.5714 9.29071 32.2171 9.225 31.8514 9.18929C31.4857 9.15357 31.12 9.15357 30.7429 9.18357C30.3657 9.21357 29.9943 9.28929 29.6171 9.415C29.2486 9.54071 28.8914 9.71429 28.5486 9.94C28.2057 10.1657 27.9029 10.4757 27.6286 10.9114C27.6571 10.875 27.7086 10.8386 27.7657 10.8107C27.8314 10.7743 27.9029 10.7464 27.98 10.7271C28.0571 10.7079 28.14 10.6971 28.2171 10.6886C28.2943 10.68 28.3886 10.68 28.48 10.68C28.5257 10.68 28.5657 10.6886 28.6057 10.6971C28.6457 10.7143 28.6857 10.7314 28.7314 10.7486C28.7771 10.7743 28.8171 10.8 28.8571 10.835C28.8971 10.87 28.92 10.9114 28.9371 10.9621C28.9543 11.0129 28.96 11.055 28.9543 11.0979C28.9486 11.1407 28.9371 11.175 28.92 11.2007C28.8743 11.2771 28.8114 11.3364 28.7314 11.3707C28.6514 11.4136 28.56 11.4479 28.44 11.4736C28.3886 11.4822 28.3314 11.49 28.28 11.4986C28.2286 11.5071 28.1771 11.5157 28.1257 11.5243C28.0743 11.5329 28.0229 11.5414 27.9714 11.55C27.92 11.5586 27.8743 11.5671 27.8343 11.5757C27.8343 11.5586 27.8343 11.5329 27.8343 11.5071C27.8343 11.4814 27.8343 11.4564 27.8343 11.4307C27.84 11.3793 27.8571 11.3279 27.88 11.2764C27.9029 11.225 27.9314 11.175 27.9714 11.1257C28.0114 11.0764 28.0571 11.0271 28.1143 10.9793C28.1714 10.9314 28.2286 10.8836 28.2914 10.8357H28.5714Z" fill="#FF1A1A"/>
                        <path d="M4.94286 12.4486C4.94286 12.0343 4.96857 11.62 5.02 11.215C5.07143 10.8014 5.14857 10.3879 5.24 9.96429C5.33143 9.54071 5.44857 9.11714 5.59429 8.7C5.73429 8.28286 5.9 7.87071 6.08 7.46429C6.26 7.05786 6.45714 6.65714 6.66857 6.26429C6.88 5.87143 7.11429 5.49 7.36 5.11429C7.60571 4.73857 7.86857 4.37571 8.14857 4.02429C8.42857 3.67286 8.72 3.33857 9.02 3.01429C9.32 2.68429 9.63429 2.375 9.96 2.08143C10.2857 1.78786 10.6171 1.51429 10.9657 1.26C10.9371 1.91143 10.8457 2.55143 10.7029 3.17714C10.56 3.80286 10.3714 4.41143 10.1429 5C9.91429 5.58857 9.64 6.15429 9.32571 6.7C9.01143 7.24571 8.66286 7.77714 8.28714 8.29C7.91143 8.80286 7.49429 9.3 7.04857 9.77714C6.60286 10.2543 6.12 10.7143 5.6 11.1486C5.56 11.1829 5.53143 11.2343 5.51429 11.3029C5.49714 11.3714 5.48857 11.4486 5.48857 11.5343C5.48857 11.6114 5.49714 11.6886 5.51429 11.7657C5.53143 11.8429 5.56 11.9114 5.6 11.9714C5.89714 12.3429 6.17143 12.7229 6.42857 13.1114C6.68571 13.5 6.92 13.8971 7.13714 14.3029C7.35429 14.7086 7.54857 15.1143 7.72 15.52C7.89143 15.9257 8.04286 16.33 8.17143 16.73C8.3 17.13 8.40857 17.5214 8.49714 17.9043C8.58571 18.2871 8.64571 18.6614 8.68 19.0271C8.22286 18.6871 7.77143 18.33 7.32 17.9557C6.86857 17.5814 6.44 17.1829 6.03429 16.76C5.62857 16.3371 5.24571 15.8886 4.89143 15.4143C4.53714 14.94 4.22286 14.4486 3.94286 13.9343C3.66286 13.42 3.42857 12.8829 3.22857 12.3257C3.02857 11.77 2.88 11.1886 2.77143 10.57C2.74857 10.3943 2.73143 10.22 2.72 10.0457C2.71429 9.87143 2.71429 9.70286 2.72 9.53429C2.72 9.36571 2.73143 9.20286 2.75429 9.04C2.77714 8.87714 2.80571 8.72 2.84 8.56857C2.90857 8.265 3.00571 7.97714 3.13714 7.71429C3.26857 7.45143 3.4 7.20571 3.56 6.98C3.72 6.74714 3.88 6.53571 4.05714 6.33714C4.23429 6.14429 4.40571 5.96143 4.58857 5.79857C4.85714 5.55428 5.14857 5.33143 5.46286 5.13C5.77714 4.92857 6.11429 4.75429 6.45714 4.60714C6.8 4.45428 7.16571 4.33 7.54286 4.23071C7.92 4.13143 8.30286 4.05857 8.69143 4.01714C8.88 4.00572 9.07143 4 9.26857 4.00572C9.46571 4.01143 9.66286 4.02286 9.85714 4.04572C10.0514 4.06857 10.2457 4.10143 10.44 4.14286C10.6343 4.18429 10.82 4.23714 11.0057 4.30143C11.2343 4.37714 11.46 4.47071 11.6743 4.58429C11.8886 4.69786 12.0943 4.82929 12.2886 4.97714C12.4829 5.12 12.6657 5.28 12.8343 5.45429C13.0029 5.62286 13.16 5.80572 13.2971 6C13.4914 6.24428 13.6514 6.5 13.78 6.76857C13.9086 7.03714 14.0143 7.31143 14.0971 7.58571C14.1743 7.86571 14.2343 8.14572 14.2686 8.42572C14.3029 8.70571 14.32 8.98 14.32 9.25428C14.32 9.77143 14.26 10.2943 14.1371 10.81C14.0143 11.3343 13.8343 11.8471 13.5971 12.3371C13.36 12.8271 13.0743 13.3 12.74 13.7429C12.4057 14.1857 12.0286 14.5943 11.6171 14.9571C11.2 15.32 10.7429 15.6431 10.2514 15.9171C9.75429 16.1914 9.22857 16.4143 8.68 16.5857C8.64 16.3943 8.60571 16.2029 8.57714 16.0114C8.54857 15.82 8.52 15.62 8.49714 15.42C8.47429 15.22 8.44571 15.02 8.41714 14.82C8.38857 14.62 8.36 14.4143 8.32 14.2086C8.76 14.2171 9.19429 14.1771 9.62857 14.0886C10.0629 14 10.4857 13.8714 10.8914 13.7086C11.2971 13.5457 11.6871 13.3486 12.0543 13.12C12.4214 12.8914 12.76 12.6429 13.0686 12.3714C13.3771 12.1 13.6571 11.8114 13.9171 11.5057C14.1714 11.2 14.3914 10.8771 14.5771 10.5457C14.7629 10.2143 14.9086 9.87714 15.0229 9.54C15.1371 9.20286 15.2086 8.86571 15.24 8.52286C15.2714 8.18 15.2543 7.83714 15.1886 7.49429C15.1429 7.22572 15.0743 6.96857 14.9829 6.71714C14.8914 6.46572 14.7743 6.225 14.6457 5.99429C14.5114 5.76357 14.3571 5.55 14.1771 5.34571C13.9971 5.14143 13.8 4.95857 13.5743 4.79C13.3486 4.61857 13.1143 4.47071 12.8571 4.35143C12.6 4.22643 12.32 4.12714 12.0343 4.05143C11.7543 3.96857 11.48 3.90857 11.2 3.87286C10.92 3.83714 10.6514 3.82571 10.3771 3.83714C10.1086 3.85429 9.88 3.88714 9.64 3.93429C9.51143 3.96286 9.38286 3.99714 9.25429 4.03857C9.12571 4.08 8.9971 4.11429 8.86857 4.15C8.74571 4.18571 8.62286 4.22714 8.5 4.27429C8.37714 4.32143 8.25429 4.36857 8.13143 4.42143C7.88571 4.51499 7.64571 4.62857 7.40571 4.76214C7.17143 4.89571 6.94286 5.04286 6.72 5.20572C6.49714 5.36857 6.29429 5.55 6.10286 5.75C5.91143 5.95 5.74 6.15428 5.58 6.37429C5.42 6.59429 5.28 6.82429 5.16 7.06857C5.04 7.31286 4.95429 7.55143 4.89143 7.79571C4.82857 8.04 4.79429 8.28429 4.78286 8.52857C4.77143 8.77286 4.78857 9.01714 4.82857 9.25429C4.85714 9.41143 4.89714 9.55857 4.94857 9.70572C5 9.85286 5.07143 9.99429 5.15429 10.13C5.23714 10.2657 5.32571 10.4014 5.41429 10.5314C5.50286 10.6614 5.6 10.7914 5.70286 10.9157C5.82 11.0643 5.94286 11.2057 6.07714 11.3386C6.21143 11.4714 6.35143 11.5971 6.49714 11.7114C6.64857 11.8257 6.8 11.93 6.95429 12.0243C7.11429 12.1186 7.28 12.2043 7.44571 12.28C7.61143 12.3557 7.78286 12.4257 7.95429 12.4886C8.12571 12.5514 8.30286 12.6086 8.47143 12.66C8.32571 12.8257 8.16571 12.9771 7.99143 13.1114C7.81714 13.2457 7.63143 13.3714 7.44 13.4886C7.24286 13.6057 7.04571 13.7143 6.83714 13.8143C6.63429 13.9143 6.42571 14.0086 6.21714 14.0886C6.00857 14.1686 5.8 14.2429 5.59143 14.3086C5.38286 14.3743 5.17429 14.4329 4.95429 14.4843C4.74 14.5357 4.525 14.58 4.31 14.6171C4.095 14.6543 3.88 14.6843 3.665 14.7071C3.64214 14.4929 3.63071 14.2786 3.63071 14.0643C3.63071 13.8414 3.64214 13.6271 3.66929 13.4214C3.69643 13.2157 3.73214 13.02 3.77857 12.8243C3.82571 12.6286 3.88 12.4414 3.95429 12.2543C3.99429 12.1429 4.04 12.0343 4.09143 11.9257C4.14286 11.8171 4.2 11.7086 4.25143 11.6C4.31429 11.4914 4.37714 11.3829 4.44571 11.2743C4.51429 11.1657 4.58286 11.0657 4.65714 10.9714C4.71429 10.9086 4.77143 10.8543 4.83429 10.7914C4.89714 10.7286 4.96 10.6657 5.02857 10.6029C5.09714 10.54 5.16571 10.4771 5.23429 10.4143C5.30286 10.3514 5.37714 10.2971 5.45143 10.2429C5.52571 10.1886 5.60571 10.1343 5.68571 10.0886C5.76571 10.0429 5.85143 10 5.93714 9.95714C6.02286 9.91429 6.11429 9.87714 6.20571 9.84571C6.29714 9.81429 6.39429 9.78857 6.49143 9.76571C6.47429 9.83429 6.46286 9.90286 6.45714 9.97143C6.45143 10.04 6.44571 10.1143 6.44571 10.1886C6.44571 10.3857 6.46857 10.5743 6.50857 10.7629C6.55429 10.9514 6.61714 11.1343 6.7 11.31C6.77714 11.4857 6.87429 11.6529 6.99714 11.8114C7.12 11.97 7.26571 12.1171 7.43143 12.25C7.24571 12.3043 7.06571 12.35 6.89143 12.39C6.71714 12.43 6.54286 12.4486 6.37429 12.4486H4.94286Z" fill="#FF1A1A"/>
                        <path d="M17.5257 15.1629C17.2514 14.9914 17.0114 14.7771 16.8143 14.5286C16.6171 14.2714 16.4543 14.0014 16.3371 13.7086C16.22 13.4157 16.1429 13.11 16.1086 12.7914C16.0829 12.4729 16.1029 12.1457 16.1771 11.8029C16.2514 11.4686 16.3429 11.1343 16.46 10.8086C16.5771 10.4829 16.72 10.1657 16.8771 9.86C17.0429 9.55429 17.2286 9.26 17.4257 8.98C17.6229 8.7 17.8429 8.43 18.0629 8.16571C18.28 7.90143 18.52 7.64857 18.76 7.40429C19 7.16 19.2514 6.92714 19.4971 6.7C19.7429 6.47286 20 6.25857 20.2571 6.05429C20.5143 5.85 20.7714 5.66143 21.0343 5.48143C21.2971 5.30143 21.5657 5.14429 21.8343 5.00143C22.1029 4.85857 22.3714 4.73714 22.6343 4.63214C22.8971 4.52714 23.16 4.44429 23.4229 4.38429C23.6343 4.33714 23.8457 4.30571 24.0571 4.29429C24.2686 4.28286 24.48 4.28286 24.6914 4.30571C24.9029 4.32286 25.1143 4.36429 25.3143 4.42429C25.5143 4.48429 25.7143 4.56143 25.9029 4.65429C26.0914 4.74714 26.2686 4.85857 26.4343 4.98571C26.6 5.11286 26.7543 5.25571 26.8943 5.42429C26.9829 5.53 27.06 5.64143 27.1314 5.75571C27.2029 5.87 27.2629 5.99143 27.3143 6.11286C27.3657 6.23429 27.4057 6.36143 27.44 6.49286C27.4743 6.62429 27.5029 6.75571 27.52 6.88714C27.5543 7.15 27.5543 7.40857 27.5143 7.66714C27.4743 7.92571 27.4114 8.18429 27.32 8.43714C27.2286 8.69 27.12 8.94286 26.9886 9.18429C26.8571 9.42571 26.7143 9.66143 26.5543 9.89C26.3943 10.1186 26.2229 10.3414 26.04 10.5586C25.8571 10.7757 25.6743 10.9871 25.4743 11.1929C25.2743 11.3986 25.0743 11.5986 24.86 11.7929C24.6514 11.9871 24.4457 12.1814 24.2343 12.3757C24.0229 12.57 23.82 12.7643 23.6143 12.9586C23.4086 13.1529 23.2343 13.3586 23.0829 13.5643C22.9371 13.77 22.8286 13.9943 22.76 14.2357C22.6857 14.4771 22.6571 14.73 22.68 14.9943C22.7029 15.2586 22.7771 15.5229 22.8971 15.7871C23.0171 16.0514 23.1886 16.3043 23.42 16.5529C23.5657 16.7243 23.7343 16.8786 23.9314 17.0243C24.1286 17.17 24.3371 17.3057 24.5657 17.43C24.7943 17.5543 25.0343 17.6643 25.2771 17.76C25.52 17.8557 25.7714 17.9386 26.0229 18.0043C26.2743 18.07 26.5257 18.1243 26.7771 18.1643C27.0286 18.2043 27.28 18.23 27.52 18.23C27.8857 18.23 28.2514 18.19 28.6171 18.11C28.9829 18.03 29.3429 17.9129 29.7029 17.7729C30.0629 17.6329 30.4114 17.4586 30.7486 17.2586C31.0857 17.0586 31.4114 16.8243 31.72 16.5586C32.0286 16.2929 32.3257 16.0014 32.6 15.6843C32.8743 15.3671 33.1229 15.0257 33.3371 14.67C33.5514 14.3143 33.7371 13.9471 33.8943 13.5586C34.0514 13.17 34.1714 12.77 34.26 12.3586C34.3371 12.05 34.3886 11.7414 34.4286 11.4329C34.4686 11.1243 34.4857 10.8157 34.48 10.5071C34.4743 10.1986 34.4543 9.89 34.4114 9.58143C34.3686 9.27286 34.3143 8.96429 34.2343 8.65571C34,7.91 33.6829 7.22857 33.28 6.61429C32.8771 6 32.4171 5.45857 31.8971 4.98714C31.3771 4.51571 30.8114 4.11857 30.2 3.79429C29.5886 3.47 28.9429 3.22286 28.2686 3.05429C27.5943 2.88571 26.9029 2.795 26.1886 2.795C25.4743 2.795 24.7886 2.88571 24.08 3.08143C23.4057 3.26143 22.7657 3.51429 22.1657 3.83286C21.5657 4.15143 21.0057 4.53286 20.4857 4.98C19.9657 5.42714 19.5057 5.92143 19.0857 6.4586C18.6657 6.99579 18.3143 7.575 18.0114 8.20714C17.7086 8.83357 17.4857 9.49071 17.32 10.175C17.1657 10.8243 17.0971 11.485 17.1086 12.1457C17.1314 12.7814 17.2229 13.395 17.3943 13.9743C17.5657 14.5536 17.8057 15.1114 18.1086 15.6393C18.4114 16.1671 18.78 16.665 19.2171 17.1414C19.6543 17.6179 20.1429 18.0393 20.6857 18.4157C20.0629 18.335 19.46 18.19 18.8743 17.99C18.2886 17.79 17.7371 17.5343 17.2229 17.2329C16.7086 16.9314 16.2429 16.5871 15.8171 16.1957C15.3914 15.8043 15.0229 15.3657 14.7143 14.8957C14.4057 14.4257 14.16 13.9243 13.9771 13.3914C13.7943 12.8586 13.6886 12.3043 13.6543 11.7286C13.6429 11.535 13.6371 11.3414 13.6371 11.1479C13.6371 10.9543 13.6429 10.7607 13.66 10.5671C13.6714 10.3736 13.6943 10.18 13.72 9.98643C13.7457 9.79286 13.7829 9.6 13.8257 9.40714C13.88 9.165 13.9486 8.92857 14.0343 8.69286C14.12 8.45714 14.22 8.22143 14.3314 7.99714C14.4429 7.77286 14.5771 7.55429 14.7143 7.34429C14.8629 7.13429 15.0229 6.93 15.1943 6.73714C15.4 6.48429 15.6171 6.24857 15.8514 6.02429C16.0857 5.8 16.3314 5.59 16.5886 5.3975C16.8457 5.205 17.1086 5.03 17.3771 4.8675C17.6457 4.705 17.9257 4.55429 18.2171 4.42429C18.5029 4.29429 18.8 4.18357 19.1029 4.09071C19.4057 3.99786 19.7143 3.92357 20.0343 3.87071C20.3543 3.81786 20.68 3.785 21.0114 3.77357C21.3429 3.76214 21.68 3.775 22.0171 3.80929C22.3543 3.84357 22.68 3.89929 23.0057 3.97357C23.3314 4.04786 23.6514 4.14143 23.96 4.25214C24.2629 4.35714 24.5543 4.47857 24.8343 4.61571C25.1143 4.75286 25.3886 4.90571 25.6457 5.0725C25.9029 5.23929 26.1429 5.425 26.3714 5.61857C26.6 5.81214 26.82 6.02429 27.0229 6.255C27.2257 6.48571 27.4114 6.725 27.58 6.98357C27.7486 7.24214 27.9 7.505 28.0343 7.78214C28.1686 8.05929 28.2857 8.33643 28.3829 8.62214C28.4857 8.90786 28.5657 9.20214 28.6343 9.50143C28.7029 9.80071 28.7486 10.1057 28.7771 10.4157C28.8286 10.955 28.8057 11.5114 28.7029 12.0729C28.6 12.6343 28.44 13.1871 28.2229 13.7229C28.0057 14.2586 27.7314 14.775 27.3943 15.2671C27.0571 15.7593 26.6743 16.22 26.24 16.65C25.8057 17.08 25.3371 17.4757 24.8286 17.8371C24.32 18.1986 23.7771 18.5257 23.2114 18.8086C22.6457 19.0914 22.0629 19.33 21.4629 19.5257C20.8629 19.7214 20.2629 19.8657 19.6629 19.9579C19.0629 20.05 18.4629 20.0893 17.8629 20.0779C17.2629 20.0664 16.6686 19.9914 16.08 19.8514C15.5029 19.7114 14.9429 19.5143 14.4114 19.2457C13.88 18.9771 13.38 18.6657 12.9114 18.2929C12.4429 17.92 12.0143 17.4986 11.6343 17.0336C11.2543 16.5686 10.9314 16.065 10.6857 15.5229C10.44 14.9807 10.2571 14.4129 10.1429 13.8193C10.0286 13.2257 9.97714 12.6321 9.98857 12.0293C10.0114 11.4264 10.0857 10.8329 10.22 10.2479C10.3086 9.87786 10.4171 9.52071 10.5429 9.17286C10.6686 8.825 10.8114 8.48357 10.9714 8.15357C11.1314 7.82357 11.3086 7.505 11.4943 7.19786C11.68 6.89071 11.8829 6.595 12.0857 6.31071C12.2886 6.03786 12.5086 5.77357 12.7343 5.52214C12.96 5.27071 13.1971 5.03143 13.4429 4.8043C13.6771 4.58 13.9343 4.36714 14.2029 4.165C14.4714 3.96286 14.7486 3.78214 15.0371 3.61357C15.3257 3.445 15.6229 3.29214 15.9286 3.155C16.2286 3.01786 16.5429 2.89857 16.8629 2.8C17.5314 2.59786 18.22 2.47714 18.9314 2.42357C19.6429 2.37 20.3543 2.39 21.0657 2.47714C21.7771 2.56429 22.4771 2.71714 23.1657 2.93071C23.8543 3.14429 24.5143 3.40857 25.1429 3.72714C25.7714 4.04571 26.3657 4.41429 26.9143 4.83786C27.4629 5.26143 27.9657 5.71571 28.4114 6.2186C28.8571 6.72143 29.24 7.26214 29.56 7.83786C29.88 8.41357 30.1371 9.01429 30.3257 9.64071C30.5143 10.2671 30.6343 10.9071 30.68 11.5607C30.6971 11.8693 30.6971 12.1779 30.68 12.4864C30.6629 12.795 30.6343 13.1036 30.5943 13.4121C30.5543 13.7207 30.5029 14.0293 30.44 14.3379C30.3771 14.6464 30.3029 14.955 30.2171 15.2636C30.0629 15.7786 29.8686 16.2857 29.64 16.7843C29.4114 17.2829 29.1571 17.7643 28.8686 18.2343C28.58 18.7043 28.26 19.1629 27.9114 19.5914C27.5629 20.02 27.2029 20.4314 26.82 20.8257C26.4371 21.22 26.0429 21.5971 25.6371 21.9471C25.2314 22.2971 24.82 22.6157 24.38 22.9029C23.9571 23.1857 23.5343 23.4343 23.1114 23.6486C22.6886 23.8629 22.2657 24.0429 21.8429 24.1886C21.4371 24.3286 21.0371 24.4457 20.6429 24.5286C20.2486 24.6114 19.86 24.6771 19.4771 24.7171C19.0943 24.7571 18.7171 24.7743 18.3514 24.7686C17.9857 24.7629 17.64 24.7343 17.32 24.6886C16.52 24.6571 15.7714 24.5171 15.08 24.2829C14.3886 24.0486 13.7543 23.7286 13.1886 23.3371C12.6229 22.9457 12.12 22.4886 11.68 21.9686C11.24 21.4486 10.88 20.8829 10.5943 20.2829C10.3143 19.6829 10.1029 19.0486 9.96 18.3829C9.81714 17.7171 9.74857 17.0286 9.74857 16.3086C9.75429 15.9371 9.77714 15.5657 9.82857 15.1943C9.88 14.8229 9.94857 14.4514 10.04 14.08C10.1 13.8257 10.1743 13.5714 10.2571 13.3171C10.34 13.0629 10.44 12.8086 10.5486 12.5629C10.6571 12.3171 10.7829 12.07 10.9143 11.8314C11.0457 11.5929 11.1943 11.3543 11.3486 11.1157C11.6086 10.7486 11.8971 10.3986 12.2143 10.0657C12.5314 9.73286 12.8686 9.43286 13.2314 9.16C13.5943 8.88714 13.9771 8.64714 14.3771 8.43357C14.7771 8.22 15.1943 8.04 15.6286 7.89286C16.0629 7.74571 16.5143 7.63071 16.9829 7.555C17.4514 7.47929 17.9257 7.445 18.4057 7.455C18.5171 7.46071 18.6257 7.46643 18.7343 7.47786C18.8429 7.48929 18.9514 7.50071 19.06 7.51786C19.1686 7.535 19.2771 7.55214 19.3857 7.575C19.4943 7.59786 19.6029 7.625 19.7114 7.65786C20.0486 7.74 20.3743 7.84571 20.6971 7.97571C21.02 8.10571 21.32 8.25857 21.6 8.43857C21.88 8.61857 22.14 8.825 22.38 9.05571C22.62 9.28643 22.8343 9.53214 23.0229 9.79714C23.2171 10.0621 23.3829 10.3443 23.5257 10.6407C23.6686 10.9371 23.7886 11.2457 23.88 11.5657C23.9714 11.8857 24.0343 12.2157 24.0686 12.5457C24.1029 12.8757 24.1086 13.2057 24.0857 13.5357C24.0686 13.8314 24.0286 14.1236 23.9714 14.4121C23.9143 14.7007 23.8343 14.9857 23.7429 15.2643C23.6514 15.5429 23.5429 15.8179 23.4229 16.0857C23.3029 16.3536 23.1657 16.6143 23.0114 16.8679C22.82 17.165 22.6086 17.4536 22.3771 17.7307C22.1457 18.0079 21.8914 18.2707 21.6171 18.5136C21.3514 18.7564 21.0686 18.9793 20.7714 19.1821C20.4743 19.385 20.1714 19.5679 19.8571 19.7307C19.5429 19.8936 19.22 20.0393 18.8857 20.1679C18.5514 20.2964 18.2114 20.4079 17.8714 20.5036C17.5314 20.5993 17.2057 20.6807 16.8857 20.7479C16.5657 20.815 16.2743 20.8679 16 20.9064C15.7257 20.945 15.5029 20.9707 15.32 20.9821C15.1371 20.9936 15.02 20.9964 14.96 20.9907C14.46 21.0564 13.9543 21.055 13.4486 20.9736C12.9429 20.8921 12.4457 20.7393 11.9543 20.5207C11.4629 20.3021 10.9886 20.015 10.5343 19.6636C10.08 19.3121 9.65429 18.8921 9.26286 18.405C8.88286 17.9093 8.53714 17.3593 8.22857 16.7464C7.92 16.1336 7.65714 15.4764 7.43429 14.775C7.23429 14.1307 7.08571 13.4757 6.98857 12.81C6.89143 12.1443 6.84857 11.4679 6.86 10.7807C6.87143 10.0936 6.94286 9.40071 7.07143 8.705C7.2 8.00929 7.38571 7.32929 7.63143 6.66C7.78857 6.225 7.96571 5.80286 8.16 5.39071C8.35429 4.97857 8.56 4.58 8.77714 4.19429C8.99429 3.80857 9.22857 3.43429 9.47714 3.06571C9.72571 2.69714 9.98857 2.34 10.264 1.99429C10.5343 1.65429 10.8171 1.32429 11.12 1.00429C11.4229 0.684286 11.7429 0.375714 12.08 0.075714C12.08 0.864286 12.0229 1.63571 11.9143 2.38286C11.8057 3.13 11.6571 3.86 11.4686 4.57571C11.28 5.29143 11.0514 5.98857 10.7886 6.67C10.5257 7.35143 10.2343 8.02714 9.90571 8.70143C9.57714 9.37571 9.21143 10.05 8.81143 10.7243C8.41143 11.3986 7.98286 12.08 7.52 12.7671C7.49714 12.7986 7.48571 12.8371 7.47429 12.8814C7.46286 12.9257 7.45714 12.97 7.45714 13.0143C7.45714 13.0586 7.46286 13.1029 7.47429 13.1471C7.48571 13.1914 7.50286 13.23 7.52 13.2614C7.65143 13.4371 7.77714 13.6157 7.90286 13.7971C8.02857 13.9786 8.15429 14.1543 8.28 14.3357C8.30857 14.375 8.34857 14.4114 8.39429 14.45C8.44 14.4886 8.48571 14.5214 8.54286 14.55C8.58857 14.5786 8.63429 14.6014 8.68 14.62C8.72571 14.6386 8.77143 14.6529 8.81714 14.6614C8.92 14.6786 9.01714 14.67 9.11429 14.635C9.21143 14.6 9.3 14.5457 9.38 14.47C9.44 14.41 9.48857 14.3457 9.52571 14.2757C9.56286 14.2057 9.59429 14.1329 9.62 14.0593C9.64571 13.9857 9.66571 13.9093 9.68 13.8357C9.69429 13.7621 9.70286 13.69 9.70286 13.6214C9.70286 13.57 9.70286 13.5186 9.69714 13.4671C9.69143 13.4157 9.68 13.3643 9.66857 13.3129C9.65143 13.26 9.63429 13.2071 9.60571 13.1543C9.57714 13.1014 9.53714 13.0514 9.49143 13.0014C9.44571 12.9514 9.39429 12.9029 9.33714 12.8557C9.28 12.8086 9.22286 12.7643 9.15429 12.7214C9.09143 12.6786 9.01714 12.6357 8.94286 12.5929C8.86857 12.55 8.78857 12.5071 8.70286 12.4643C8.62286 12.4214 8.53143 12.3786 8.44 12.3357C8.34857 12.2929 8.25714 12.25 8.16571 12.2071C8.08 12.1657 7.99429 12.1243 7.90857 12.0829C7.82286 12.0414 7.73714 12 7.65143 11.9586C7.56571 11.9171 7.48571 11.8757 7.40571 11.8343C7.32571 11.7929 7.24571 11.7514 7.17143 11.71C7.09143 11.6686 7.01143 11.6271 6.94286 11.5857C6.86857 11.5443 6.79429 11.5029 6.73143 11.4614C6.65714 11.42 6.58286 11.3786 6.51429 11.3371C6.44571 11.2957 6.38286 11.2543 6.32 11.2129C6.25714 11.1714 6.2 11.13 6.15429 11.0886C6.10286 11.0471 6.06286 11.0057 6.02286 10.9643C6.00571 10.9471 5.99429 10.9243 5.98286 10.8957C5.97143 10.8671 5.96571 10.8386 5.96 10.81C5.95429 10.7814 5.95429 10.7529 5.96 10.7243C5.96 10.6957 5.97143 10.6671 5.98857 10.6386C6.00571 10.61 6.02857 10.5814 6.06 10.5571C6.09143 10.5329 6.12286 10.5186 6.16286 10.5143C6.20857 10.5029 6.25429 10.5029 6.3 10.5143C6.34571 10.5257 6.39143 10.5486 6.42857 10.5771C6.47429 10.6057 6.50571 10.6386 6.53143 10.6671C6.59429 10.7086 6.65714 10.7529 6.72 10.7929C6.78286 10.8329 6.84571 10.8686 6.91429 10.9071C6.97714 10.9414 7.04571 10.9786 7.11429 11.0114C7.18286 11.0443 7.25143 11.0771 7.32571 11.1086C7.39429 11.14 7.46286 11.1714 7.53714 11.2014C7.61143 11.2314 7.68571 11.2614 7.76 11.2914C7.83429 11.3214 7.90857 11.3514 7.98286 11.3814C8.05714 11.4114 8.13143 11.4414 8.20571 11.4714C8.28 11.5014 8.35429 11.5314 8.42857 11.5614C8.50286 11.5914 8.57714 11.6214 8.65143 11.6514C8.72571 11.6814 8.8 11.7114 8.87429 11.7414C8.94857 11.7714 9.02286 11.8014 9.09714 11.8314C9.17143 11.8614 9.24571 11.8914 9.31429 11.9214C9.38857 11.9514 9.45714 11.9814 9.52571 12.0114C9.59429 12.0414 9.65714 12.0714 9.72 12.1014C9.78286 12.1314 9.84 12.1614 9.89143 12.1914C9.94857 12.2214 9.99429 12.2514 10.04 12.2814C10.0857 12.3114 10.1257 12.3414 10.16 12.3714C10.2257 12.4214 10.28 12.48 10.32 12.5471C10.36 12.6143 10.3886 12.6871 10.4057 12.7657C10.4229 12.8443 10.4286 12.9257 10.4229 13.01C10.4171 13.0943 10.4 13.1814 10.3714 13.2686C10.3429 13.3943 10.3029 13.5186 10.2514 13.6414C10.2 13.7643 10.1371 13.885 10.0629 14.0043C10.0114 14.0957 9.94857 14.1857 9.88 14.2743C9.81143 14.3629 9.74286 14.4514 9.66857 14.54C9.59429 14.6286 9.51429 14.7171 9.42857 14.8057C9.34286 14.8943 9.25143 14.9829 9.15429 15.0714C9.05714 15.16 8.95429 15.2486 8.84 15.3371C8.72571 15.4257 8.60571 15.5143 8.48 15.6029C8.35429 15.6914 8.21714 15.78 8.07429 15.8686C7.93143 15.9571 7.78286 16.0457 7.62286 16.1343C7.45714 16.2229 7.28571 16.3114 7.11429 16.4C6.93143 16.4914 6.74286 16.5829 6.55429 16.6686C6.36571 16.7543 6.17143 16.84 5.97714 16.92C5.78286 17 5.58286 17.0743 5.38286 17.1429C5.18286 17.2114 4.97714 17.2743 4.76571 17.3314C4.54857 17.39 4.32571 17.44 4.1 17.4843C3.87429 17.5286 3.64286 17.5657 3.4 17.5914C3.23714 17.6114 3.07429 17.6229 2.90571 17.63C2.73714 17.6371 2.56857 17.6371 2.4 17.6371C2.23143 17.6371 2.06857 17.6257 1.91143 17.6143C1.75429 17.6029 1.59714 17.5886 1.45143 17.5686C1.30571 17.5486 1.16571 17.5186 1.03143 17.4886C0.897143 17.4586 0.774286 17.4229 0.651429 17.3829C0.509143 17.3371 0.389143 17.2829 0.291429 17.2229C0.194286 17.1629 0.120408 17.0971 0.0658795 17.0314C0.0112937 16.9657 -0.0230061 16.8971 -0.0144346 16.8314C-0.0144346 16.7657 0.0113651 16.7057 0.0657938 16.65C0.120366 16.5943 0.197223 16.5443 0.291695 16.5C0.386166 16.4557 0.498494 16.4257 0.628965 16.4057C0.762294 16.3857 0.903579 16.3743 1.03139 16.37C1.15996 16.3657 1.30139 16.3657 1.42996 16.37C1.52139 16.3743 1.61282 16.3829 1.70425 16.3914C1.79568 16.4 1.88139 16.4171 1.97282 16.4343C2.06425 16.4514 2.15568 16.4743 2.24139 16.5C2.32711 16.5257 2.41282 16.56 2.49282 16.5943C2.63568 16.65 2.76711 16.7171 2.89282 16.7886C3.01853 16.86 3.13853 16.9429 3.24711 17.0314C3.35568 17.12 3.44711 17.2171 3.52711 17.32C3.61282 17.4229 3.67996 17.5314 3.73711 17.64C3.79425 17.7486 3.83996 17.8629 3.86568 17.9771C3.89139 18.0914 3.89996 18.2086 3.89139 18.3286C3.88282 18.4114 3.86568 18.4886 3.83996 18.56C3.81425 18.6314 3.77996 18.6971 3.73711 18.7543C3.69425 18.8114 3.64282 18.8629 3.58568 18.9029C3.52854 18.9429 3.46568 18.9714 3.39711 18.9886C3.32854 19.0143 3.25425 19.0286 3.17425 19.0286C3.09425 19.0286 3.00854 19.0171 2.92282 18.9886C2.83711 18.96 2.75139 18.9114 2.67996 18.8371C2.60854 18.8029 2.54568 18.76 2.48854 18.7171C2.41997 18.6629 2.35997 18.6 2.30854 18.5371C2.2571 18.4743 2.20854 18.4114 2.16568 18.3371C2.12282 18.2743 2.08568 18.2 2.05425 18.1257C2.02282 18.0514 1.9971 17.9714 1.97711 17.8914C1.9571 17.8114 1.95139 17.7257 1.9571 17.6343C1.9571 17.6343 1.9571 17.6343 1.9571 17.6343C1.92568 17.7429 1.89997 17.8543 1.87425 17.9657C1.84854 18.0771 1.82853 18.19 1.81425 18.3029C1.79996 18.4157 1.79425 18.5286 1.79425 18.6414C1.79425 18.7543 1.79996 18.87 1.81425 18.9829C1.82854 19.0957 1.84854 19.2057 1.87997 19.3186C1.90568 19.43 1.94283 19.5414 1.9857 19.6529C2.02856 19.7643 2.07713 19.8757 2.13428 19.9871C2.19142 20.0986 2.25999 20.21 2.33999 20.3214C2.4257 20.4329 2.51713 20.5443 2.62 20.6557C2.78285 20.8329 2.97142 21.01 3.17713 21.1871C3.38285 21.3643 3.60571 21.5414 3.84 21.7029C4.07428 21.8643 4.31999 22.0143 4.57713 22.15C4.83428 22.2857 5.10285 22.4029 5.38856 22.5C5.67428 22.5971 5.96571 22.6743 6.26285 22.7314C6.55999 22.7886 6.85713 22.8257 7.15999 22.8371C7.46285 22.8486 7.76571 22.8343 8.07428 22.7886C8.33143 22.7543 8.58285 22.6971 8.82857 22.6229C9.07428 22.5486 9.31428 22.4557 9.53714 22.35C9.78857 22.2329 10.0343 22.1043 10.2686 21.9643C10.5029 21.8243 10.7314 21.6729 10.9486 21.5143C11.1657 21.3557 11.3771 21.19 11.5829 21.0129C11.7886 20.8357 11.9771 20.6543 12.1543 20.4586C12.3314 20.2629 12.4943 20.0529 12.6429 19.8386C12.7857 19.6243 12.9143 19.4043 13.0286 19.1714C13.1429 18.9386 13.2429 18.7014 13.3286 18.4529C13.38 18.3057 13.4314 18.1586 13.4771 18.0114C13.5229 17.8643 13.5629 17.7171 13.5971 17.57C13.6314 17.4229 13.6629 17.2757 13.6857 17.1286C13.7086 16.9814 13.7257 16.8343 13.7314 16.6871C13.7314 16.52 13.72 16.3529 13.6971 16.1857C13.6743 16.0186 13.6429 15.86 13.6029 15.7C13.5629 15.54 13.5143 15.3886 13.4486 15.2371C13.3829 15.0857 13.3171 14.9429 13.2343 14.8086C13.1571 14.6743 13.0629 14.5486 12.9571 14.4229C12.8514 14.2971 12.7429 14.1829 12.6143 14.0786C12.4857 13.9743 12.3486 13.88 12.2 13.7971C12.0514 13.7143 11.8971 13.6429 11.7257 13.5771C11.6171 13.5429 11.5143 13.5143 11.4114 13.4914C11.3086 13.4686 11.2057 13.4514 11.1029 13.4371C11 13.4229 10.8971 13.4143 10.8 13.4086C10.7029 13.4029 10.6 13.4029 10.5029 13.4086C10.4057 13.4143 10.3143 13.4257 10.2171 13.4371C10.12 13.4486 10.0343 13.4657 9.94286 13.4886C9.85143 13.5114 9.76571 13.5429 9.68 13.58C9.59429 13.6171 9.50857 13.66 9.42857 13.7029C9.34857 13.7457 9.27429 13.7943 9.20571 13.85C9.13714 13.9057 9.07429 13.9657 9.01714 14.03C8.96 14.0943 8.91143 14.1586 8.87429 14.23C8.83714 14.3014 8.80571 14.38 8.79143 14.4586C8.77143 14.5371 8.76 14.6157 8.76571 14.7014C8.77143 14.7871 8.79143 14.88 8.82286 14.98C8.85429 15.08 8.9 15.1743 8.95714 15.2686C9.01429 15.3629 9.08286 15.4571 9.16857 15.5514C9.28857 15.6971 9.43143 15.8371 9.59429 15.9714C9.75714 16.1057 9.93143 16.2343 10.12 16.3486C10.3086 16.4629 10.5086 16.5686 10.7257 16.66C10.9429 16.7514 11.1657 16.8286 11.4 16.8914C11.6343 16.9543 11.88 17.0029 12.1314 17.0343C12.3829 17.0657 12.6343 17.0857 12.8857 17.0857C13.1371 17.0857 13.3886 17.0743 13.64 17.0429C13.8914 17.0114 14.1429 16.9657 14.3943 16.9057C14.6457 16.8457 14.8914 16.7743 15.1314 16.69C15.3714 16.6057 15.6114 16.51 15.84 16.4014C16.0686 16.2929 16.2914 16.1757 16.5086 16.0471C16.7257 15.9186 16.9314 15.7786 17.1314 15.63C17.3314 15.4814 17.52 15.3257 17.6971 15.1629H17.5257Z" fill="#FF1A1A"/>
                      </svg>
                    </div>
                  )}
                  {testimonials[current].source === 'facebook' && (
                    <div className="inline-flex items-center justify-center p-2 bg-white rounded-lg shadow-sm">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="40px" height="40px">
                        <path fill="#039be5" d="M24 5A19 19 0 1 0 24 43A19 19 0 1 0 24 5Z"/>
                        <path fill="#fff" d="M26.572,29.036h4.917l0.772-4.995h-5.69v-2.73c0-2.075,0.678-3.915,2.619-3.915h3.119v-4.359c-0.548-0.074-1.707-0.236-3.897-0.236c-4.573,0-7.254,2.415-7.254,7.917v3.323h-4.701v4.995h4.701v13.729C22.089,42.905,23.032,43,24,43c0.875,0,1.729-0.08,2.572-0.194V29.036z"/>
                      </svg>
                    </div>
                  )}
                  {testimonials[current].source === 'thumbtack' && (
                    <div className="inline-flex items-center justify-center p-2 bg-white rounded-lg shadow-sm">
                      <svg width="40" height="40" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M25 0C11.1934 0 0 11.1934 0 25C0 38.8066 11.1934 50 25 50C38.8066 50 50 38.8066 50 25C50 11.1934 38.8066 0 25 0Z" fill="#0077B5"/>
                        <path d="M14.8438 13.6719C14.8438 15.332 13.4961 16.6797 11.8359 16.6797C10.1758 16.6797 8.82812 15.332 8.82812 13.6719C8.82812 12.0117 10.1758 10.6641 11.8359 10.6641C13.4961 10.6641 14.8438 12.0117 14.8438 13.6719Z" fill="white"/>
                        <path d="M9.32812 19.0234H14.3281V35.7422H9.32812V19.0234Z" fill="white"/>
                        <path d="M27.6641 18.5234C24.5 18.5234 23.0078 20.207 22.3438 21.3281H22.2656V19.0234H17.5781V35.7422H22.5781V27.5156C22.5781 25.1797 23.0469 22.9219 25.9375 22.9219C28.7578 22.9219 28.8281 25.5859 28.8281 27.6719V35.7422H33.8281V26.6328C33.8281 22.2266 32.8438 18.5234 27.6641 18.5234Z" fill="white"/>
                      </svg>
                    </div>
                  )}
                  {testimonials[current].source === 'nextdoor' && (
                    <div className="inline-flex items-center justify-center p-2 bg-white rounded-lg shadow-sm">
                      <svg width="40" height="40" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M256 0C114.84 0 0 114.84 0 256C0 397.16 114.84 512 256 512C397.16 512 512 397.16 512 256C512 114.84 397.16 0 256 0Z" fill="#6FBE66"/>
                        <path d="M363.68 195.76L363.44 195.52C335.52 165.92 303.2 149.92 256 149.92C208.8 149.92 176.48 166.16 148.56 195.76L148.32 195.52L111.2 159.04V352H152.8V221.92C175.52 200 212.96 190.24 256 190.24C299.04 190.24 336.48 200 359.2 222.16V352H400.8V159.04L363.68 195.76Z" fill="white"/>
                      </svg>
                    </div>
                  )}
                </div>
              )}
            </div>
            <p className="text-gray-700 italic mb-6 text-base md:text-lg">&ldquo;{testimonials[current].text}&rdquo;</p>
            <div>
              {testimonials[current].image && (
                <div className="w-16 h-16 rounded-full overflow-hidden mx-auto mb-3">
                  {/* eslint-disable-next-line @next/next/no-img-element */}
                  <img src={testimonials[current].image} alt={testimonials[current].name} className="w-full h-full object-cover" />
                </div>
              )}
              <p className="font-semibold text-gray-900">{testimonials[current].name}</p>
              <p className="text-sm text-gray-500">{testimonials[current].role}</p>
              {testimonials[current].source && (
                <div className="mt-2 flex justify-center">
                  <div className="text-xs px-2 py-1 bg-gray-100 rounded-full text-gray-600">
                    Verified {testimonials[current].source.charAt(0).toUpperCase() + testimonials[current].source.slice(1)} Review
                  </div>
                </div>
              )}
            </div>
          </motion.div>
        </AnimatePresence>
      </div>

      {/* Navigation dots */}
      <div className="flex justify-center gap-2 mt-6">
        {testimonials.map((_, index) => (
          <button
            key={index}
            onClick={() => {
              setDirection(index > current ? 1 : -1);
              setCurrent(index);
            }}
            className={`w-2.5 h-2.5 rounded-full transition-colors ${index === current ? 'bg-blue-600' : 'bg-gray-300'}`}
            aria-label={`Go to testimonial ${index + 1}`}
          />
        ))}
      </div>

      {/* Navigation buttons */}
      <button
        onClick={handlePrev}
        className="absolute top-1/2 left-2 -translate-y-1/2 bg-white/80 backdrop-blur-sm rounded-full p-2 shadow hover:bg-white transition-colors"
        aria-label="Previous testimonial"
      >
        <svg className="h-5 w-5 text-gray-800" viewBox="0 0 20 20" fill="currentColor">
          <path fillRule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clipRule="evenodd" />
        </svg>
      </button>
      <button
        onClick={handleNext}
        className="absolute top-1/2 right-2 -translate-y-1/2 bg-white/80 backdrop-blur-sm rounded-full p-2 shadow hover:bg-white transition-colors"
        aria-label="Next testimonial"
      >
        <svg className="h-5 w-5 text-gray-800" viewBox="0 0 20 20" fill="currentColor">
          <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
        </svg>
      </button>
    </div>
  );
}
